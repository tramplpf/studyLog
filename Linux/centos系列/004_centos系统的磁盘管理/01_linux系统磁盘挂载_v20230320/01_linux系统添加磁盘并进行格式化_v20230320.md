# linux系统添加磁盘并进行格式化

## 说明
本实验通过Vmware进行学习，磁盘的添加是通过软件操作进行添加的。
自己缺少实际给服务添加硬盘的经验。 


## 操作步骤


操作步骤：
* 安装新的磁盘
* 对磁盘进行分区
* 对新创建的分区进行格式化
* 编辑/etc/fstab来挂载格式化好的分区 


<br/>
<br/>
<br/>
通过fdisk查看linux中磁盘的大小，分区等信息
```shell
    $> fdisk -l 
```
<img src="./pic/01_通过fdisk查看linux的磁盘信息_v20230318.png">

通过上图，可以知道，我们新安装的磁盘被Linux识别出来了，不过该磁盘到目前为止还没有进行分区。  
新安装的磁盘，被识别为sdb，可以在/dev目录下找到。对应的是/dev/sdb

* 对新挂载的磁盘进行分区
通过fdisk命令对磁盘进行分区
命令如下
```shell
#> fdisk /dev/sdb
```
<img src="./pic/02_通过fdisk对磁盘进行分区_20230318.png">

进入fdisk命令后  
通过p命令查看磁盘当前分区情况  
通过n命令创建新的分区，接着通过p命令确定创建的新分区时primary key。 
<img src="./pic/03_通过fdisk对磁盘进行分区的过程_20230318.png">
这里只创建一个分区。之后，通过w命令将分区信息进行保存。 

在创建分区时，只能有一个Primary key，可以有多个扩展分区。 


分区创建之后，再次通过fdisk -l 可以查看之前创建的/dev/sdb磁盘已经创建了一个/dev/sdb1分区。
<img src="./pic/04_查看分区创建情况_20230318210443.png">


分区创建好之后，需要进行格式化，才能存储数据。   
这里我们通过如下命令来格式化分区
```shell
    #> mkfs.xfs /dev/sdb1
```
效果如下：
<img src="./pic/05_mkfs.xfs来进行格式化分区_20230318210616.png">

分区创建好之后，我们就需要将创建好的分区挂载到相关的目录下。  
为了保证系统启动时，可以将分区挂载到指定目录，我们需要编辑/etc/fstab  
我们需要知道分区对应的UUID。 我们可以通过blkid命令查询相关分区的UUID， 如下图   
<img src="./pic/05_通过blkid查看分区对应的UUID_20230318210740.png">

安装如下图编辑/etc/fstab文件 
<img src="./pic/06_编辑fstab文件进行分区挂载_20230318211108.png">


接下来我们通过lsblk命令来查看磁盘的分区情况，效果如下
<img src="./pic/08_通过lsblk命令查看磁盘的分区情况_20230318212108.png">